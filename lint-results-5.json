[{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\app\\provider\\profile\\page.tsx","messages":[{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":219,"column":49,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":221,"endColumn":15}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mockProfile'. Either include it or remove the dependency array.","line":133,"column":6,"nodeType":"ArrayExpression","endLine":133,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [mockProfile]","fix":{"range":[4496,4498],"text":"[mockProfile]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":223,"column":17,"nodeType":"JSXOpeningElement","endLine":227,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { \n  User, \n  Award, \n  GraduationCap, \n  _Briefcase, \n  Globe, \n  Star,\n  MapPin,\n  Clock,\n  DollarSign,\n  CheckCircle,\n  AlertCircle,\n  _Edit,\n  _Save\n} from 'lucide-react';\nimport ProfileEditor from '@/components/provider/ProfileEditor';\nimport { RichProviderProfile, ProviderProfileUpdate } from '@/types/provider';\n\nexport default function ProviderProfilePage() {\n  const [profile, setProfile] = useState<RichProviderProfile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [_isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Mock profile data for development\n  const mockProfile: RichProviderProfile = {\n    id: '1',\n    full_name: 'John Doe',\n    email: 'john.doe@example.com',\n    bio: 'Experienced web developer with 5+ years building modern applications.',\n    portfolio_images: ['/api/placeholder/400/300'],\n    certifications: [\n      {\n        id: '1',\n        provider_id: '1',\n        certification_name: 'AWS Certified Developer',\n        issuing_organization: 'Amazon Web Services',\n        issue_date: '2023-01-15',\n        expiry_date: '2026-01-15',\n        certificate_number: 'AWS-123456',\n        verification_status: 'verified',\n        certificate_url: 'https://aws.amazon.com/certification',\n        created_at: '2023-01-15T00:00:00Z',\n        updated_at: '2023-01-15T00:00:00Z'\n      }\n    ],\n    languages: ['English', 'Spanish'],\n    specializations: ['React', 'Node.js', 'TypeScript', 'AWS'],\n    experience_years: 5,\n    hourly_rate: 75,\n    availability_schedule: {\n      monday: { isAvailable: true, timeSlots: [{ start: '09:00', end: '17:00' }] },\n      tuesday: { isAvailable: true, timeSlots: [{ start: '09:00', end: '17:00' }] },\n      wednesday: { isAvailable: true, timeSlots: [{ start: '09:00', end: '17:00' }] },\n      thursday: { isAvailable: true, timeSlots: [{ start: '09:00', end: '17:00' }] },\n      friday: { isAvailable: true, timeSlots: [{ start: '09:00', end: '17:00' }] }\n    },\n    education: [\n      {\n        id: '1',\n        provider_id: '1',\n        institution_name: 'University of Technology',\n        degree_type: 'bachelor',\n        field_of_study: 'Computer Science',\n        start_year: 2015,\n        end_year: 2019,\n        is_current: false,\n        description: 'Focused on software engineering and web development',\n        created_at: '2015-09-01T00:00:00Z',\n        updated_at: '2019-06-01T00:00:00Z'\n      }\n    ],\n    professional_summary: 'Full-stack developer specializing in modern web technologies with a passion for clean, maintainable code.',\n    service_area_radius: 25,\n    verified_at: '2023-06-01T00:00:00Z',\n    verification_documents: ['/api/placeholder/400/300'],\n    social_links: {\n      website: 'https://johndoe.dev',\n      linkedin: 'https://linkedin.com/in/johndoe'\n    },\n    response_time_avg: 15,\n    completion_rate: 98,\n    profile_completion_score: 85,\n    rating: 4.8,\n    avatar_url: '/api/placeholder/150/150',\n    created_at: '2020-01-01T00:00:00Z',\n    updated_at: '2024-01-01T00:00:00Z',\n    total_bookings: 127,\n    completed_bookings: 125,\n    total_reviews: 89,\n    avg_review_rating: 4.8,\n    certification_count: 1,\n    education_count: 1,\n    portfolio_count: 0,\n    language_count: 2,\n    last_booking_date: '2024-01-15T00:00:00Z',\n    last_review_date: '2024-01-10T00:00:00Z',\n    service_types: ['Web Development', 'API Development', 'Database Design'],\n    avg_service_price: 150,\n    active_services: 3\n  };\n\n  useEffect(() => {\n    // Simulate API call\n    const loadProfile = async () => {\n      try {\n        setIsLoading(true);\n        // In real app, this would be an API call\n        // const response = await fetch('/api/provider/profile');\n        // const data = await response.json();\n        // setProfile(data.data);\n        \n        // For now, use mock data\n        setTimeout(() => {\n          setProfile(mockProfile);\n          setIsLoading(false);\n        }, 1000);\n      } catch (_err) {\n        setError('Failed to load profile');\n        setIsLoading(false);\n      }\n    };\n\n    loadProfile();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSaveProfile = async (profileData: ProviderProfileUpdate) => {\n    try {\n      setIsSaving(true);\n      // In real app, this would be an API call\n      // const response = await fetch('/api/provider/profile', {\n      //   method: 'PUT',\n      //   headers: { 'Content-Type': 'application/json' },\n      //   body: JSON.stringify(profileData)\n      // });\n      \n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Update local state\n      if (profile) {\n        setProfile({\n          ...profile,\n          ...profileData\n        });\n      }\n      \n      // Show success message\n      console.log('Profile saved successfully');\n    } catch (err) {\n      setError('Failed to save profile');\n      console.error('Save error:', err);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"animate-pulse space-y-6\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\n          <div className=\"h-64 bg-gray-200 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold mb-2\">Error Loading Profile</h2>\n              <p className=\"text-gray-600 mb-4\">{error}</p>\n              <Button onClick={() => window.location.reload()}>\n                Try Again\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <User className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold mb-2\">Profile Not Found</h2>\n              <p className=\"text-gray-600\">Unable to load your profile information.</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Profile Overview Sidebar */}\n        <div className=\"lg:col-span-1 space-y-6\">\n          {/* Profile Card */}\n          <Card>\n            <CardHeader className=\"text-center\">\n              // eslint-disable-next-line react/jsx-no-comment-textnodes\n              <div className=\"relative mx-auto mb-4\">\n                {/* eslint-disable-next-line @next/next/no-img-element */}\n                <img\n                  src={profile.avatar_url || '/api/placeholder/150/150'}\n                  alt={profile.full_name}\n                  className=\"w-32 h-32 rounded-full object-cover mx-auto\"\n                />\n                {profile.verified_at && (\n                  <div className=\"absolute -bottom-2 -right-2 bg-blue-500 text-white rounded-full p-1\">\n                    <CheckCircle className=\"h-5 w-5\" />\n                  </div>\n                )}\n              </div>\n              <CardTitle className=\"text-xl\">{profile.full_name}</CardTitle>\n              <p className=\"text-gray-600\">{profile.email}</p>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {/* Rating */}\n              <div className=\"flex items-center justify-center space-x-2\">\n                <div className=\"flex items-center space-x-1\">\n                  {[...Array(5)].map((_, i) => (\n                    <Star\n                      key={i}\n                      className={`h-4 w-4 ${\n                        i < Math.floor(profile.rating)\n                          ? 'text-yellow-400 fill-current'\n                          : 'text-gray-300'\n                      }`}\n                    />\n                  ))}\n                </div>\n                <span className=\"text-sm text-gray-600\">\n                  {profile.rating} ({profile.total_reviews} reviews)\n                </span>\n              </div>\n\n              {/* Stats */}\n              <div className=\"grid grid-cols-2 gap-4 text-center\">\n                <div>\n                  <div className=\"text-2xl font-bold text-blue-600\">\n                    {profile.completed_bookings}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Completed</div>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold text-green-600\">\n                    {profile.completion_rate}%\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Success Rate</div>\n                </div>\n              </div>\n\n              {/* Quick Info */}\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center space-x-2\">\n                  <MapPin className=\"h-4 w-4 text-gray-400\" />\n                  <span>Service Area: {profile.service_area_radius}km</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-gray-400\" />\n                  <span>Response: {profile.response_time_avg}min avg</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  <span>${profile.hourly_rate}/hr</span>\n                </div>\n              </div>\n\n              {/* Profile Completion */}\n              <div className=\"pt-4 border-t\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium\">Profile Completion</span>\n                  <span className=\"text-sm text-blue-600 font-bold\">\n                    {profile.profile_completion_score}%\n                  </span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div\n                    className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                    style={{ width: `${profile.profile_completion_score}%` }}\n                  ></div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Specializations */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Specializations</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex flex-wrap gap-2\">\n                {profile.specializations.map((spec, index) => (\n                  <Badge key={index} variant=\"secondary\">\n                    {spec}\n                  </Badge>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Languages */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg flex items-center space-x-2\">\n                <Globe className=\"h-5 w-5\" />\n                <span>Languages</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {profile.languages.map((lang, index) => (\n                  <div key={index} className=\"flex items-center space-x-2\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                    <span className=\"text-sm\">{lang}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"lg:col-span-2\">\n          <Tabs defaultValue=\"overview\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n              <TabsTrigger value=\"certifications\">Certifications</TabsTrigger>\n              <TabsTrigger value=\"education\">Education</TabsTrigger>\n              <TabsTrigger value=\"edit\">Edit Profile</TabsTrigger>\n            </TabsList>\n\n            {/* Overview Tab */}\n            <TabsContent value=\"overview\" className=\"space-y-6\">\n              {/* Professional Summary */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Professional Summary</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-gray-700 leading-relaxed\">\n                    {profile.professional_summary || 'No professional summary available.'}\n                  </p>\n                </CardContent>\n              </Card>\n\n              {/* Bio */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>About Me</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-gray-700 leading-relaxed\">\n                    {profile.bio || 'No bio available.'}\n                  </p>\n                </CardContent>\n              </Card>\n\n              {/* Experience & Stats */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Experience & Performance</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-blue-600\">\n                        {profile.experience_years}+\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Years Experience</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-green-600\">\n                        {profile.total_bookings}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Total Bookings</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-purple-600\">\n                        {profile.avg_service_price}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Avg Service Price</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Certifications Tab */}\n            <TabsContent value=\"certifications\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Award className=\"h-5 w-5\" />\n                    <span>Certifications</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {profile.certifications.length > 0 ? (\n                    <div className=\"space-y-4\">\n                      {profile.certifications.map((cert) => (\n                        <div key={cert.id} className=\"border rounded-lg p-4\">\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <h4 className=\"font-semibold text-lg\">{cert.certification_name}</h4>\n                              <p className=\"text-gray-600\">{cert.issuing_organization}</p>\n                              <div className=\"flex items-center space-x-4 mt-2 text-sm text-gray-500\">\n                                {cert.issue_date && (\n                                  <span>Issued: {new Date(cert.issue_date).toLocaleDateString()}</span>\n                                )}\n                                {cert.expiry_date && (\n                                  <span>Expires: {new Date(cert.expiry_date).toLocaleDateString()}</span>\n                                )}\n                              </div>\n                            </div>\n                            <Badge\n                              variant={cert.verification_status === 'verified' ? 'default' : 'secondary'}\n                              className=\"capitalize\"\n                            >\n                              {cert.verification_status}\n                            </Badge>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-gray-500 text-center py-8\">\n                      No certifications added yet.\n                    </p>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Education Tab */}\n            <TabsContent value=\"education\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <GraduationCap className=\"h-5 w-5\" />\n                    <span>Education</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {profile.education.length > 0 ? (\n                    <div className=\"space-y-4\">\n                      {profile.education.map((edu) => (\n                        <div key={edu.id} className=\"border rounded-lg p-4\">\n                          <h4 className=\"font-semibold text-lg\">{edu.institution_name}</h4>\n                          <p className=\"text-gray-600\">\n                            {edu.degree_type && (\n                              <span className=\"capitalize\">{edu.degree_type}</span>\n                            )}\n                            {edu.field_of_study && ` in ${edu.field_of_study}`}\n                          </p>\n                          <p className=\"text-sm text-gray-500 mt-1\">\n                            {edu.start_year} - {edu.is_current ? 'Present' : edu.end_year}\n                          </p>\n                          {edu.description && (\n                            <p className=\"text-gray-700 mt-2\">{edu.description}</p>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-gray-500 text-center py-8\">\n                      No education information added yet.\n                    </p>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Edit Profile Tab */}\n            <TabsContent value=\"edit\" className=\"space-y-6\">\n              <ProfileEditor\n                profile={profile}\n                onSave={handleSaveProfile}\n              />\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\components\\ImageAttachment.tsx","messages":[{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":245,"column":40,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":247,"endColumn":19},{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":366,"column":41,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":368,"endColumn":11}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":168,"column":43,"nodeType":"JSXOpeningElement","endLine":168,"endColumn":72,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":249,"column":21,"nodeType":"JSXOpeningElement","endLine":253,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":370,"column":13,"nodeType":"JSXOpeningElement","endLine":370,"endColumn":69,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useRef, useCallback } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Image, Upload, X, Eye, Download, FileText, Sparkles } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\ninterface ImageAttachmentProps {\n  images: File[];\n  onImagesChangeAction: (images: File[]) => void;\n  maxImages?: number;\n  maxSizeMB?: number;\n  acceptedTypes?: string[];\n  className?: string;\n}\n\nexport function ImageAttachment({\n  images,\n  onImagesChangeAction,\n  maxImages = 5,\n  maxSizeMB = 10,\n  acceptedTypes = ['image/jpeg', 'image/png', 'image/webp'],\n  className = ''\n}: ImageAttachmentProps) {\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [summary, setSummary] = useState('')\n  const [error, setError] = useState<string | null>(null)\n  \n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const dropZoneRef = useRef<HTMLDivElement>(null)\n\n  // Handle file selection\n  const handleFileSelect = useCallback((files: FileList | null) => {\n    if (!files) return\n\n    const newImages: File[] = []\n    const errors: string[] = []\n\n    Array.from(files).forEach((file) => {\n      // Validate file type\n      if (!acceptedTypes.includes(file.type)) {\n        errors.push(`${file.name} is not a supported image type`)\n        return\n      }\n\n      // Validate file size\n      if (file.size > maxSizeMB * 1024 * 1024) {\n        errors.push(`${file.name} is too large (max ${maxSizeMB}MB)`)\n        return\n      }\n\n      // Check if we've reached max files\n      if (images.length + newImages.length >= maxImages) {\n        errors.push(`Maximum ${maxImages} images allowed`)\n        return\n      }\n\n      newImages.push(file)\n    })\n\n    // Show errors if any\n    if (errors.length > 0) {\n      setError(errors.join(', '))\n      setTimeout(() => setError(null), 5000)\n    }\n\n    // Add new images\n    if (newImages.length > 0) {\n      const updatedImages = [...images, ...newImages]\n      onImagesChangeAction(updatedImages)\n    }\n  }, [images, maxImages, maxSizeMB, acceptedTypes, onImagesChangeAction])\n\n  // Handle drag and drop\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(true)\n  }, [])\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n    \n    const files = e.dataTransfer.files\n    handleFileSelect(files)\n  }, [handleFileSelect])\n\n  // Remove image\n  const removeImage = useCallback((id: string) => {\n    const updatedImages = images.filter(img => img.name !== id) // Assuming name is unique for now\n    onImagesChangeAction(updatedImages)\n  }, [images, onImagesChangeAction])\n\n  // Generate AI summary\n  const generateSummary = useCallback(async () => {\n    if (images.length === 0) return\n\n    setIsProcessing(true)\n    setError(null)\n\n    try {\n      // Create FormData with images\n      const formData = new FormData()\n      images.forEach((img, index) => {\n        formData.append(`image_${index}`, img)\n      })\n\n      // Call AI summarization API\n      const response = await fetch('/api/ai/summarize-images', {\n        method: 'POST',\n        body: formData\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to generate summary')\n      }\n\n      const data = await response.json()\n      const aiSummary = data.summary\n\n      setSummary(aiSummary)\n      // onSummaryChange?.(aiSummary) // This prop was removed from interface\n\n      // Update images with summaries\n      // This part of the logic needs to be adapted to the new ImageFile interface\n      // For now, we'll just update the summary in the state\n      const updatedImages = images.map((img, index) => ({\n        ...img,\n        summary: data.imageSummaries?.[index] || '',\n        isProcessing: false\n      }))\n\n      // onImagesChange(updatedImages) // This prop was removed from interface\n      onImagesChangeAction(updatedImages) // Use the new prop\n\n    } catch (err) {\n      console.error('Failed to generate summary:', err)\n      setError('Failed to generate AI summary. Please try again.')\n    } finally {\n      setIsProcessing(false)\n    }\n  }, [images, onImagesChangeAction])\n\n  // Format file size\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n  }\n\n  // Get file type icon\n  const getFileTypeIcon = (type: string) => {\n    // eslint-disable-next-line jsx-a11y/alt-text\n    if (type.startsWith('image/')) return <Image className=\"h-4 w-4\" />\n    return <FileText className=\"h-4 w-4\" />\n  }\n\n  return (\n    <div className={cn(\"space-y-4\", className)}>\n      {/* File Input */}\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"image-upload\">Attach Images</Label>\n        <Input\n          id=\"image-upload\"\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept={acceptedTypes.join(',')}\n          onChange={(e) => handleFileSelect(e.target.files)}\n          disabled={images.length >= maxImages}\n          className=\"hidden\"\n        />\n        \n        {/* Drop Zone */}\n        <div\n          ref={dropZoneRef}\n          className={cn(\n            \"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer\",\n            isDragOver \n              ? \"border-blue-500 bg-blue-50\" \n              : \"border-gray-300 hover:border-gray-400 hover:bg-gray-50\",\n            // disabled && \"opacity-50 cursor-not-allowed\" // This prop was removed from interface\n          )}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          onClick={() => fileInputRef.current?.click()}\n        >\n          <Upload className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\n          <p className=\"text-sm text-gray-600\">\n            {isDragOver \n              ? \"Drop images here\" \n              : \"Drag & drop images here or click to browse\"\n            }\n          </p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Max {maxImages} files, {maxSizeMB}MB each. Supported: JPEG, PNG, WebP\n          </p>\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardContent className=\"p-3\">\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Image Grid */}\n      {images.length > 0 && (\n        <div className=\"space-y-4\">\n          <div className=\"flex justify-between items-center\">\n            <h4 className=\"font-medium\">Attached Images ({images.length}/{maxImages})</h4>\n            <Button\n              onClick={generateSummary}\n              disabled={isProcessing}\n              size=\"sm\"\n              className=\"flex items-center gap-2\"\n            >\n              <Sparkles className=\"h-4 w-4\" />\n              {isProcessing ? 'Processing...' : 'Generate AI Summary'}\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {images.map((image) => (\n              <Card key={image.name} className=\"overflow-hidden\">\n                <CardContent className=\"p-0\">\n                  {/* Image Preview */}\n                  // eslint-disable-next-line react/jsx-no-comment-textnodes\n                  <div className=\"relative aspect-square bg-gray-100\">\n                    {/* eslint-disable-next-line @next/next/no-img-element */}\n                    <img\n                      src={URL.createObjectURL(image)}\n                      alt={image.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    \n                    {/* Remove Button */}\n                    <Button\n                      onClick={() => removeImage(image.name)}\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      className=\"absolute top-2 right-2 h-6 w-6 p-0\"\n                      // disabled={disabled} // This prop was removed from interface\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </Button>\n\n                    {/* Processing Indicator */}\n                    {/* This part of the logic needs to be adapted to the new ImageFile interface */}\n                    {/* For now, we'll just show a placeholder */}\n                    {/* {image.isProcessing && (\n                      <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\">\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\" />\n                      </div>\n                    )} */}\n                  </div>\n\n                  {/* Image Info */}\n                  <div className=\"p-3 space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      {getFileTypeIcon(image.type)}\n                      <span className=\"text-sm font-medium truncate\" title={image.name}>\n                        {image.name}\n                      </span>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                      <span>{formatFileSize(image.size)}</span>\n                      <span>{new Date().toLocaleDateString()}</span> {/* Placeholder for uploadedAt */}\n                    </div>\n\n                    {/* Individual Image Summary */}\n                    {/* This part of the logic needs to be adapted to the new ImageFile interface */}\n                    {/* For now, we'll just show a placeholder */}\n                    {/* {image.summary && (\n                      <div className=\"text-xs text-gray-600 bg-gray-50 p-2 rounded\">\n                        <strong>AI Summary:</strong> {image.summary}\n                      </div>\n                    )} */}\n\n                    {/* Actions */}\n                    <div className=\"flex gap-1\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1 h-8 text-xs\"\n                        onClick={() => window.open(URL.createObjectURL(image), '_blank')}\n                        // disabled={disabled} // This prop was removed from interface\n                      >\n                        <Eye className=\"h-3 w-3 mr-1\" />\n                        Preview\n                      </Button>\n                      \n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1 h-8 text-xs\"\n                        onClick={() => {\n                          const link = document.createElement('a')\n                          link.href = URL.createObjectURL(image)\n                          link.download = image.name\n                          link.click()\n                        }}\n                        // disabled={disabled} // This prop was removed from interface\n                      >\n                        <Download className=\"h-3 w-3 mr-1\" />\n                        Download\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* AI Summary */}\n      {summary && (\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Sparkles className=\"h-5 w-5 text-blue-500\" />\n              <h4 className=\"font-medium\">AI-Generated Summary</h4>\n            </div>\n            \n            <Textarea\n              value={summary}\n              onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\n                setSummary(e.target.value)\n                // onSummaryChange?.(e.target.value) // This prop was removed from interface\n              }}\n              placeholder=\"AI summary will appear here...\"\n              className=\"min-h-[100px]\"\n              // disabled={disabled} // This prop was removed from interface\n            />\n            \n            <p className=\"text-xs text-gray-500 mt-2\">\n              This summary was generated by AI based on your attached images. \n              You can edit it to better describe your service request.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Instructions */}\n      {images.length === 0 && (\n        <Card className=\"border-dashed\">\n          // eslint-disable-next-line react/jsx-no-comment-textnodes\n          <CardContent className=\"p-4 text-center text-muted-foreground\">\n            {/* eslint-disable-next-line jsx-a11y/alt-text */}\n            <Image className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\n            <p>No images attached yet</p>\n            <p className=\"text-sm mt-1\">\n              Attach images to help providers understand your service request better\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\components\\ReviewSystem.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react/jsx-no-comment-textnodes').","line":388,"column":21,"severity":1,"nodeType":null,"fix":{"range":[12617,12675],"text":" "}}],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":391,"column":23,"nodeType":"JSXOpeningElement","endLine":395,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":592,"column":25,"nodeType":"JSXOpeningElement","endLine":597,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport React, { useState, useEffect, useCallback } from 'react'\nimport Image from 'next/image'\nimport StarRating from '@/components/ui/StarRating'\n\ninterface Review {\n  id: string\n  rating: number\n  overall_quality?: number\n  review_text?: string\n  service_quality?: number\n  communication?: number\n  punctuality?: number\n  value_for_money?: number\n  would_recommend?: boolean\n  photos?: string[]\n  created_at: string\n  status: string\n  spam_score?: number\n  helpful_count?: number\n  reported_count?: number\n  users: {\n    name: string\n    avatar_url?: string\n  }\n  bookings: {\n    service_name: string\n    service_date: string\n  }\n  responses?: ReviewResponse[]\n}\n\ninterface ReviewResponse {\n  id: string\n  response_text: string\n  is_public: boolean\n  created_at: string\n  provider: {\n    name: string\n    avatar_url?: string\n  }\n}\n\ninterface ReviewSystemProps {\n  vendorId: string\n  showSubmissionForm?: boolean\n  bookingId?: string\n  userId?: string\n  showModerationTools?: boolean\n}\n\nexport default function ReviewSystem({ \n  vendorId, \n  showSubmissionForm = false,\n  bookingId,\n  userId,\n  showModerationTools = false\n}: ReviewSystemProps) {\n  const [reviews, setReviews] = useState<Review[]>([])\n  const [loading, setLoading] = useState(true)\n  const [submitting, setSubmitting] = useState(false)\n  const [currentPage, setCurrentPage] = useState(0)\n  const [hasMore, setHasMore] = useState(true)\n  const [showForm, setShowForm] = useState(showSubmissionForm)\n  \n  // Form state\n  const [rating, setRating] = useState(0)\n  const [reviewText, setReviewText] = useState('')\n  const [serviceQuality, setServiceQuality] = useState(0)\n  const [communication, setCommunication] = useState(0)\n  const [punctuality, setPunctuality] = useState(0)\n  const [valueForMoney, setValueForMoney] = useState(0)\n  const [wouldRecommend, setWouldRecommend] = useState<boolean | null>(null)\n  const [photos, setPhotos] = useState<string[]>([])\n\n  const loadReviews = useCallback(async (page = 0) => {\n    try {\n      setLoading(true)\n      const response = await fetch(\n        `/api/reviews/create?vendor_id=${vendorId}&limit=10&offset=${page * 10}`\n      )\n      const data = await response.json()\n      \n      if (data.reviews) {\n        if (page === 0) {\n          setReviews(data.reviews)\n        } else {\n          setReviews(prev => [...prev, ...data.reviews])\n        }\n        setHasMore(data.pagination.has_more)\n      }\n    } catch (error) {\n      console.error('Failed to load reviews:', error)\n    } finally {\n      setLoading(false)\n    }\n  }, [vendorId])\n\n  // Load reviews on mount or when vendorId changes\n  useEffect(() => {\n    loadReviews()\n  }, [loadReviews])\n\n  const submitReview = async () => {\n    if (!rating || !bookingId || !userId) return\n\n    try {\n      setSubmitting(true)\n      \n      const response = await fetch('/api/reviews/create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          booking_id: bookingId,\n          user_id: userId,\n          vendor_id: vendorId,\n          rating,\n          review_text: reviewText || null,\n          service_quality: serviceQuality || null,\n          communication: communication || null,\n          punctuality: punctuality || null,\n          value_for_money: valueForMoney || null,\n          would_recommend: wouldRecommend,\n          photos: photos.length > 0 ? photos : null\n        })\n      })\n\n      const result = await response.json()\n\n      if (result.success) {\n        // Reset form\n        setRating(0)\n        setReviewText('')\n        setServiceQuality(0)\n        setCommunication(0)\n        setPunctuality(0)\n        setValueForMoney(0)\n        setWouldRecommend(null)\n        setPhotos([])\n        setShowForm(false)\n        \n        // Reload reviews\n        loadReviews(0)\n        \n        alert('Review submitted successfully!')\n      } else {\n        alert(`Error: ${result.error}`)\n      }\n    } catch (error) {\n      console.error('Failed to submit review:', error)\n      alert('Failed to submit review. Please try again.')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handlePhotoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files\n    if (files) {\n      // In a real implementation, you'd upload these to a storage service\n      // For now, we'll just create placeholder URLs\n      const newPhotos = Array.from(files).map(file => URL.createObjectURL(file))\n      setPhotos(prev => [...prev, ...newPhotos])\n    }\n  }\n\n  const removePhoto = (index: number) => {\n    setPhotos(prev => prev.filter((_, i) => i !== index))\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    })\n  }\n\n  const calculateAverageRating = () => {\n    if (reviews.length === 0) return 0\n    const publishedReviews = reviews.filter(r => r.status === 'published')\n    if (publishedReviews.length === 0) return 0\n    \n    const sum = publishedReviews.reduce((acc, review) => acc + (review.overall_quality || review.rating), 0)\n    return (sum / publishedReviews.length).toFixed(1)\n  }\n\n  const getRatingDistribution = () => {\n    const distribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 }\n    const publishedReviews = reviews.filter(r => r.status === 'published')\n    \n    publishedReviews.forEach(review => {\n      const rating = Math.round(review.overall_quality || review.rating)\n      if (rating >= 1 && rating <= 5) {\n        distribution[rating as keyof typeof distribution]++\n      }\n    })\n    return distribution\n  }\n\n  const getPublishedReviews = () => {\n    return reviews.filter(review => review.status === 'published')\n  }\n\n  const getPendingReviews = () => {\n    return reviews.filter(review => review.status === 'pending')\n  }\n\n  const getFlaggedReviews = () => {\n    return reviews.filter(review => review.status === 'flagged')\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            Customer Reviews\n          </h3>\n          <div className=\"flex items-center gap-4 mt-2\">\n            <div className=\"flex items-center gap-2\">\n              <StarRating \n                value={Number(calculateAverageRating())} \n                readonly \n                size=\"large\" \n                allowHalfStars={true}\n              />\n              <span className=\"text-2xl font-bold text-gray-900\">\n                {calculateAverageRating()}\n              </span>\n            </div>\n            <span className=\"text-gray-600\">\n              ({getPublishedReviews().length} review{getPublishedReviews().length !== 1 ? 's' : ''})\n            </span>\n          </div>\n        </div>\n        \n        {showSubmissionForm && !showForm && (\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Write Review\n          </button>\n        )}\n      </div>\n\n      {/* Rating Distribution */}\n      {getPublishedReviews().length > 0 && (\n        <div className=\"mb-8\">\n          <h4 className=\"text-lg font-semibold mb-4\">Rating Breakdown</h4>\n          <div className=\"space-y-2\">\n            {Object.entries(getRatingDistribution())\n              .reverse()\n              .map(([rating, count]) => (\n                <div key={rating} className=\"flex items-center gap-3\">\n                  <span className=\"text-sm font-medium w-8\">{rating} â˜…</span>\n                  <div className=\"flex-1 bg-gray-200 rounded-full h-2\">\n                    <div\n                      className=\"bg-yellow-400 h-2 rounded-full transition-all duration-300\"\n                      style={{\n                        width: `${getPublishedReviews().length > 0 ? (count / getPublishedReviews().length) * 100 : 0}%`\n                      }}\n                    />\n                  </div>\n                  <span className=\"text-sm text-gray-600 w-8\">{count}</span>\n                </div>\n              ))}\n          </div>\n        </div>\n      )}\n\n      {/* Moderation Summary (if enabled) */}\n      {showModerationTools && (\n        <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n          <h4 className=\"text-lg font-semibold text-yellow-800 mb-2\">Moderation Summary</h4>\n          <div className=\"grid grid-cols-3 gap-4 text-sm\">\n            <div>\n              <span className=\"text-yellow-700\">Pending:</span>\n              <span className=\"ml-2 font-semibold\">{getPendingReviews().length}</span>\n            </div>\n            <div>\n              <span className=\"text-yellow-700\">Flagged:</span>\n              <span className=\"ml-2 font-semibold\">{getFlaggedReviews().length}</span>\n            </div>\n            <div>\n              <span className=\"text-yellow-700\">Published:</span>\n              <span className=\"ml-2 font-semibold\">{getPublishedReviews().length}</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Review Submission Form */}\n      {showForm && (\n        <div className=\"bg-gray-50 rounded-xl p-6 mb-8\">\n          <h4 className=\"text-lg font-semibold mb-4\">Share Your Experience</h4>\n          \n          <div className=\"space-y-6\">\n            {/* Overall Rating */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Overall Rating *\n              </label>\n              <StarRating \n                value={rating} \n                onChange={setRating} \n                size=\"large\" \n                allowHalfStars={true}\n              />\n            </div>\n\n            {/* Detailed Ratings */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Service Quality\n                </label>\n                <StarRating \n                  value={serviceQuality} \n                  onChange={setServiceQuality} \n                  allowHalfStars={true}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Communication\n                </label>\n                <StarRating \n                  value={communication} \n                  onChange={setCommunication} \n                  allowHalfStars={true}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Punctuality\n                </label>\n                <StarRating \n                  value={punctuality} \n                  onChange={setPunctuality} \n                  allowHalfStars={true}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Value for Money\n                </label>\n                <StarRating \n                  value={valueForMoney} \n                  onChange={setValueForMoney} \n                  allowHalfStars={true}\n                />\n              </div>\n            </div>\n\n            {/* Review Text */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Your Review\n              </label>\n              <textarea\n                value={reviewText}\n                onChange={(e) => setReviewText(e.target.value)}\n                rows={4}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Share details about your experience...\"\n              />\n            </div>\n\n            {/* Photo Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Add Photos (Optional)\n              </label>\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/*\"\n                onChange={handlePhotoUpload}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n              {photos.length > 0 && (\n                <div className=\"mt-3 flex flex-wrap gap-2\">\n                  {photos.map((photo, index) => (\n                    // eslint-disable-next-line react/jsx-no-comment-textnodes\n                    <div key={index} className=\"relative\">\n                      {/* eslint-disable-next-line @next/next/no-img-element */}\n                      <img\n                        src={photo}\n                        alt={`Review photo ${index + 1}`}\n                        className=\"w-20 h-20 object-cover rounded-lg\"\n                      />\n                      <button\n                        onClick={() => removePhoto(index)}\n                        className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600\"\n                      >\n                        Ã—\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Recommendation */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Would you recommend this provider?\n              </label>\n              <div className=\"flex gap-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setWouldRecommend(true)}\n                  className={`px-4 py-2 rounded-lg border transition-colors ${\n                    wouldRecommend === true\n                      ? 'bg-green-100 border-green-500 text-green-700'\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  ðŸ‘ Yes\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setWouldRecommend(false)}\n                  className={`px-4 py-2 rounded-lg border transition-colors ${\n                    wouldRecommend === false\n                      ? 'bg-red-100 border-red-500 text-red-700'\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  ðŸ‘Ž No\n                </button>\n              </div>\n            </div>\n\n            {/* Submit Buttons */}\n            <div className=\"flex gap-3\">\n              <button\n                onClick={submitReview}\n                disabled={!rating || submitting}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {submitting ? 'Submitting...' : 'Submit Review'}\n              </button>\n              <button\n                onClick={() => setShowForm(false)}\n                className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Reviews List */}\n      <div className=\"space-y-6\">\n        {loading && reviews.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading reviews...</p>\n          </div>\n        ) : getPublishedReviews().length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-600\">No reviews yet. Be the first to share your experience!</p>\n          </div>\n        ) : (\n          getPublishedReviews().map((review) => (\n            <div key={review.id} className=\"border-b border-gray-200 pb-6\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                  {review.users.avatar_url ? (\n                    <Image\n                      src={review.users.avatar_url}\n                      alt={review.users.name}\n                      width={40}\n                      height={40}\n                      className=\"w-10 h-10 rounded-full\"\n                    />\n                  ) : (\n                    <span className=\"text-blue-600 font-semibold\">\n                      {review.users.name.charAt(0).toUpperCase()}\n                    </span>\n                  )}\n                </div>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h5 className=\"font-semibold text-gray-900\">\n                        {review.users.name}\n                      </h5>\n                      <p className=\"text-sm text-gray-600\">\n                        {review.bookings.service_name} â€¢ {formatDate(review.bookings.service_date)}\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <span className=\"text-sm text-gray-500\">\n                        {formatDate(review.created_at)}\n                      </span>\n                      {review.spam_score && review.spam_score > 0.7 && (\n                        <div className=\"text-xs text-red-600 mt-1\">\n                          âš ï¸ High spam score\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"mb-3\">\n                    <StarRating \n                      value={review.overall_quality || review.rating} \n                      readonly \n                      allowHalfStars={true}\n                    />\n                  </div>\n                  \n                  {review.review_text && (\n                    <p className=\"text-gray-700 mb-3\">{review.review_text}</p>\n                  )}\n                  \n                  {/* Detailed Ratings */}\n                  {(review.service_quality || review.communication || review.punctuality || review.value_for_money) && (\n                    <div className=\"grid grid-cols-2 gap-3 text-sm mb-3\">\n                      {review.service_quality && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-600\">Service Quality:</span>\n                          <StarRating \n                            value={review.service_quality} \n                            readonly \n                            size=\"small\" \n                            allowHalfStars={true}\n                            showValue={false}\n                          />\n                        </div>\n                      )}\n                      {review.communication && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-600\">Communication:</span>\n                          <StarRating \n                            value={review.communication} \n                            readonly \n                            size=\"small\" \n                            allowHalfStars={true}\n                            showValue={false}\n                          />\n                        </div>\n                      )}\n                      {review.punctuality && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-600\">Punctuality:</span>\n                          <StarRating \n                            value={review.punctuality} \n                            readonly \n                            size=\"small\" \n                            allowHalfStars={true}\n                            showValue={false}\n                          />\n                        </div>\n                      )}\n                      {review.value_for_money && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-600\">Value for Money:</span>\n                          <StarRating \n                            value={review.value_for_money} \n                            readonly \n                            size=\"small\" \n                            allowHalfStars={true}\n                            showValue={false}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  \n                  {review.would_recommend !== null && (\n                    <div className=\"mt-3 flex items-center gap-2 text-sm\">\n                      <span className=\"text-gray-600\">Would recommend:</span>\n                      <span className={review.would_recommend ? 'text-green-600' : 'text-red-600'}>\n                        {review.would_recommend ? 'ðŸ‘ Yes' : 'ðŸ‘Ž No'}\n                      </span>\n                    </div>\n                  )}\n\n                  {/* Photos */}\n                  {review.photos && review.photos.length > 0 && (\n                    <div className=\"mt-3 flex gap-2\">\n                      {review.photos.map((photo, index) => (\n                        // eslint-disable-next-line @next/next/no-img-element\n                        <img\n                          key={index}\n                          src={photo}\n                          alt={`Review photo ${index + 1}`}\n                          className=\"w-16 h-16 object-cover rounded-lg\"\n                        />\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Provider Response */}\n                  {review.responses && review.responses.length > 0 && (\n                    <div className=\"mt-4 pl-4 border-l-2 border-blue-200\">\n                      {review.responses.map((response) => (\n                        <div key={response.id} className=\"bg-blue-50 p-3 rounded-lg\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <div className=\"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center\">\n                              {response.provider.avatar_url ? (\n                                <Image\n                                  src={response.provider.avatar_url}\n                                  alt={response.provider.name}\n                                  width={24}\n                                  height={24}\n                                  className=\"w-6 h-6 rounded-full\"\n                                />\n                              ) : (\n                                <span className=\"text-blue-600 text-xs font-semibold\">\n                                  {response.provider.name.charAt(0).toUpperCase()}\n                                </span>\n                              )}\n                            </div>\n                            <span className=\"text-sm font-medium text-blue-800\">\n                              {response.provider.name} (Provider)\n                            </span>\n                            <span className=\"text-xs text-blue-600\">\n                              {formatDate(response.created_at)}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-blue-700\">{response.response_text}</p>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Action Buttons */}\n                  <div className=\"mt-3 flex items-center gap-4 text-sm\">\n                    <button className=\"text-gray-600 hover:text-blue-600 transition-colors\">\n                      ðŸ‘ Helpful ({review.helpful_count || 0})\n                    </button>\n                    <button className=\"text-gray-600 hover:text-red-600 transition-colors\">\n                      âš ï¸ Report\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n\n        {/* Load More */}\n        {hasMore && getPublishedReviews().length > 0 && (\n          <div className=\"text-center\">\n            <button\n              onClick={() => {\n                const nextPage = currentPage + 1\n                setCurrentPage(nextPage)\n                loadReviews(nextPage)\n              }}\n              disabled={loading}\n              className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors\"\n            >\n              {loading ? 'Loading...' : 'Load More Reviews'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n} ","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\components\\admin\\SpecialtyAnalytics.tsx","messages":[{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":167,"column":15,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":170,"endColumn":9}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadAllSpecialtiesAnalytics' and 'loadSpecialtyAnalytics'. Either include them or remove the dependency array.","line":94,"column":6,"nodeType":"ArrayExpression","endLine":94,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [loadAllSpecialtiesAnalytics, loadSpecialtyAnalytics, selectedSpecialty, timeRange]","fix":{"range":[2569,2599],"text":"[loadAllSpecialtiesAnalytics, loadSpecialtyAnalytics, selectedSpecialty, timeRange]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":172,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5037,5040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5037,5040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { motion } from 'framer-motion'\r\nimport { BarChart3, TrendingUp, Users, DollarSign, MapPin, Calendar } from 'lucide-react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { Badge } from '@/components/ui/badge'\r\n\r\ninterface SpecialtyMetrics {\r\n  id: string\r\n  name: string\r\n  vendorCount: number\r\n  bookingCount: number\r\n}\r\n\r\ninterface TopVendor {\r\n  id: string\r\n  full_name: string\r\n  business_name: string\r\n  average_rating: number\r\n  total_bookings: number\r\n}\r\n\r\ninterface BookingTrend {\r\n  date: string\r\n  count: number\r\n  revenue: number\r\n}\r\n\r\ninterface SpecialtyAnalytics {\r\n  specialty?: {\r\n    id: string\r\n    name: string\r\n    parent_id: string | null\r\n    path: string\r\n  }\r\n  metrics: {\r\n    vendorCount: number\r\n    totalBookings: number\r\n    totalRevenue: number\r\n    averageRating: number\r\n    bookingTrends: BookingTrend[]\r\n    topVendors: TopVendor[]\r\n    geographicDistribution: {\r\n      countries: Array<{ name: string; count: number }>\r\n      cities: Array<{ name: string; count: number }>\r\n    }\r\n  }\r\n}\r\n\r\ninterface AllSpecialtiesAnalytics {\r\n  overview: {\r\n    totalSpecialties: number\r\n    totalVendors: number\r\n    totalBookings: number\r\n    overallTrends: BookingTrend[]\r\n  }\r\n  specialtyMetrics: SpecialtyMetrics[]\r\n  popularityRanking: SpecialtyMetrics[]\r\n}\r\n\r\n// Helper functions\r\nconst formatCurrency = (amount: number) => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD'\r\n  }).format(amount)\r\n}\r\n\r\nconst formatNumber = (num: number) => {\r\n  return new Intl.NumberFormat('en-US').format(num)\r\n}\r\n\r\nexport default function SpecialtyAnalytics() {\r\n  const [timeRange, setTimeRange] = useState<'7d' | '30d' | '90d' | '1y'>('30d')\r\n  const [selectedSpecialty, setSelectedSpecialty] = useState<string>('')\r\n  const [analytics, setAnalytics] = useState<SpecialtyAnalytics | AllSpecialtiesAnalytics | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [specialties, setSpecialties] = useState<Array<{ id: string; name: string }>>([])\r\n\r\n  useEffect(() => {\r\n    loadSpecialties()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selectedSpecialty) {\r\n      loadSpecialtyAnalytics(selectedSpecialty)\r\n    } else {\r\n      loadAllSpecialtiesAnalytics()\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedSpecialty, timeRange])\r\n\r\n  const loadSpecialties = async () => {\r\n    try {\r\n      const response = await fetch('/api/specialties')\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setSpecialties(data.items || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading specialties:', error)\r\n    }\r\n  }\r\n\r\n  const loadSpecialtyAnalytics = async (specialtyId: string) => {\r\n    try {\r\n      setLoading(true)\r\n      const response = await fetch(`/api/analytics/specialties?specialtyId=${specialtyId}&timeRange=${timeRange}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setAnalytics(data.analytics)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading specialty analytics:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const loadAllSpecialtiesAnalytics = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const response = await fetch(`/api/analytics/specialties?timeRange=${timeRange}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setAnalytics(data.analytics)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading all specialties analytics:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"text-gray-500\">Loading analytics...</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!analytics) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        No analytics data available\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const isSingleSpecialty = 'specialty' in analytics\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header and Controls */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">\r\n            {isSingleSpecialty ? `${analytics.specialty?.name} Analytics` : 'Specialty Analytics'}\r\n          </h2>\r\n          <p className=\"text-gray-600\">\r\n            {isSingleSpecialty ? 'Performance metrics for this specialty' : 'Overview of all specialties'}\r\n          </p>\r\n        </div>\r\n        \r\n        // eslint-disable-next-line react/jsx-no-comment-textnodes\n        <div className=\"flex items-center space-x-4\">\r\n          {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n          <Select value={timeRange} onValueChange={(value: any) => setTimeRange(value)}>\r\n            <SelectTrigger className=\"w-32\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"7d\">Last 7 days</SelectItem>\r\n              <SelectItem value=\"30d\">Last 30 days</SelectItem>\r\n              <SelectItem value=\"90d\">Last 90 days</SelectItem>\r\n              <SelectItem value=\"1y\">Last year</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Select value={selectedSpecialty} onValueChange={setSelectedSpecialty}>\r\n            <SelectTrigger className=\"w-64\">\r\n              <SelectValue placeholder=\"Select specialty for detailed view\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"\">All Specialties Overview</SelectItem>\r\n              {specialties.map(specialty => (\r\n                <SelectItem key={specialty.id} value={specialty.id}>\r\n                  {specialty.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {isSingleSpecialty ? (\r\n        <SingleSpecialtyView analytics={analytics as SpecialtyAnalytics} />\r\n      ) : (\r\n        <AllSpecialtiesView analytics={analytics as AllSpecialtiesAnalytics} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SingleSpecialtyView({ analytics }: { analytics: SpecialtyAnalytics }) {\r\n  const { _specialty, metrics } = analytics\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Key Metrics */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Vendors</CardTitle>\r\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatNumber(metrics.vendorCount)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Active providers in this specialty\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Bookings</CardTitle>\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatNumber(metrics.totalBookings)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Bookings in selected period\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Revenue</CardTitle>\r\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatCurrency(metrics.totalRevenue)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Revenue generated in period\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Average Rating</CardTitle>\r\n            <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{metrics.averageRating.toFixed(1)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Customer satisfaction score\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Top Performing Vendors */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Top Performing Vendors</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-4\">\r\n            {metrics.topVendors.map((vendor, index) => (\r\n              <div key={vendor.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Badge variant=\"outline\">#{index + 1}</Badge>\r\n                  <div>\r\n                    <p className=\"font-medium\">{vendor.business_name || vendor.full_name}</p>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {formatNumber(vendor.total_bookings)} bookings\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-medium\">{vendor.average_rating.toFixed(1)} â­</p>\r\n                  <p className=\"text-sm text-gray-500\">Rating</p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Geographic Distribution */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Geographic Distribution</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {metrics.geographicDistribution.countries.slice(0, 5).map((country, index) => (\r\n                <div key={index} className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <MapPin className=\"h-4 w-4 text-gray-400\" />\r\n                    <span className=\"text-sm\">{country.name}</span>\r\n                  </div>\r\n                  <Badge variant=\"secondary\">{country.count}</Badge>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Booking Trends</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {metrics.bookingTrends.slice(-7).map((trend, index) => (\r\n                <div key={index} className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">\r\n                    {new Date(trend.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n                  </span>\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <span className=\"text-sm\">{trend.count} bookings</span>\r\n                    <span className=\"text-sm font-medium\">{formatCurrency(trend.revenue / 100)}</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction AllSpecialtiesView({ analytics }: { analytics: AllSpecialtiesAnalytics }) {\r\n  const { overview, specialtyMetrics, popularityRanking } = analytics\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Overview Metrics */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Specialties</CardTitle>\r\n            <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatNumber(overview.totalSpecialties)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Active service categories\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Vendors</CardTitle>\r\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatNumber(overview.totalVendors)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Active service providers\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Bookings</CardTitle>\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatNumber(overview.totalBookings)}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Total bookings in period\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Growth Trend</CardTitle>\r\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-green-600\">+12.5%</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              vs previous period\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Popularity Ranking */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Most Popular Specialties</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-4\">\r\n            {popularityRanking.map((specialty, index) => (\r\n              <div key={specialty.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Badge variant={index < 3 ? \"default\" : \"outline\"}>#{index + 1}</Badge>\r\n                  <div>\r\n                    <p className=\"font-medium\">{specialty.name}</p>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {formatNumber(specialty.vendorCount)} vendors\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-medium\">{formatNumber(specialty.bookingCount)}</p>\r\n                  <p className=\"text-sm text-gray-500\">Bookings</p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* All Specialties Table */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>All Specialties Performance</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr className=\"border-b\">\r\n                  <th className=\"text-left p-2\">Specialty</th>\r\n                  <th className=\"text-left p-2\">Vendors</th>\r\n                  <th className=\"text-left p-2\">Bookings</th>\r\n                  <th className=\"text-left p-2\">Performance</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {specialtyMetrics.map(specialty => (\r\n                  <tr key={specialty.id} className=\"border-b hover:bg-gray-50\">\r\n                    <td className=\"p-2 font-medium\">{specialty.name}</td>\r\n                    <td className=\"p-2\">{formatNumber(specialty.vendorCount)}</td>\r\n                    <td className=\"p-2\">{formatNumber(specialty.bookingCount)}</td>\r\n                    <td className=\"p-2\">\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div \r\n                          className=\"bg-blue-600 h-2 rounded-full\" \r\n                          style={{ \r\n                            width: `${Math.min((specialty.bookingCount / Math.max(...specialtyMetrics.map(s => s.bookingCount))) * 100, 100)}%` \r\n                          }}\r\n                        ></div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\components\\provider\\ProfileEditor.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react/jsx-no-comment-textnodes').","line":554,"column":19,"severity":1,"nodeType":null,"fix":{"range":[20540,20598],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react/jsx-no-comment-textnodes').","line":801,"column":19,"severity":1,"nodeType":null,"fix":{"range":[32593,32651],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":557,"column":144,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":557,"endColumn":147,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20850,20853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20850,20853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":804,"column":154,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":804,"endColumn":157,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32913,32916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32913,32916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { \r\n  User, \r\n  Award, \r\n  GraduationCap, \r\n  Briefcase, \r\n  Globe, \r\n  Plus, \r\n  Edit, \r\n  Trash2, \r\n  Save,\r\n  CheckCircle,\r\n  AlertCircle\r\n} from 'lucide-react';\r\nimport { \r\n  RichProviderProfile, \r\n  ProviderProfileUpdate,\r\n  CertificationRequest,\r\n  EducationRequest,\r\n  PortfolioRequest,\r\n  LanguageRequest,\r\n  LANGUAGE_PROFICIENCY_LEVELS,\r\n  DEGREE_TYPES,\r\n  _VERIFICATION_STATUS\r\n} from '@/types/provider';\r\n\r\ninterface ProfileEditorProps {\r\n  profile?: RichProviderProfile;\r\n  onSave?: (profile: ProviderProfileUpdate) => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function ProfileEditor({ profile, onSave, className = '' }: ProfileEditorProps) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [formData, setFormData] = useState<ProviderProfileUpdate>({\r\n    bio: '',\r\n    portfolio_images: [],\r\n    specializations: [],\r\n    experience_years: 0,\r\n    hourly_rate: 0,\r\n    professional_summary: '',\r\n    service_area_radius: 10,\r\n    social_links: {}\r\n  });\r\n\r\n  const [certifications, setCertifications] = useState<CertificationRequest[]>([]);\r\n  const [education, setEducation] = useState<EducationRequest[]>([]);\r\n  const [portfolio, setPortfolio] = useState<PortfolioRequest[]>([]);\r\n  const [languages, setLanguages] = useState<LanguageRequest[]>([]);\r\n\r\n  const [newCertification, setNewCertification] = useState<CertificationRequest>({\r\n    certification_name: '',\r\n    issuing_organization: '',\r\n    issue_date: '',\r\n    expiry_date: '',\r\n    certificate_number: '',\r\n    certificate_url: ''\r\n  });\r\n\r\n  const [newEducation, setNewEducation] = useState<EducationRequest>({\r\n    institution_name: '',\r\n    degree_type: 'bachelor',\r\n    field_of_study: '',\r\n    start_year: new Date().getFullYear(),\r\n    end_year: new Date().getFullYear(),\r\n    is_current: false,\r\n    description: ''\r\n  });\r\n\r\n  const [newPortfolio, setNewPortfolio] = useState<PortfolioRequest>({\r\n    title: '',\r\n    description: '',\r\n    service_type: '',\r\n    images: [],\r\n    project_date: '',\r\n    client_name: '',\r\n    project_duration: '',\r\n    technologies_used: [],\r\n    is_featured: false,\r\n    display_order: 0\r\n  });\r\n\r\n  const [newLanguage, setNewLanguage] = useState<LanguageRequest>({\r\n    language_code: '',\r\n    language_name: '',\r\n    proficiency_level: 'fluent',\r\n    is_primary: false\r\n  });\r\n\r\n  const [newSpecialization, setNewSpecialization] = useState('');\r\n  const [newTechnology, setNewTechnology] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (profile) {\r\n      setFormData({\r\n        bio: profile.bio || '',\r\n        portfolio_images: profile.portfolio_images || [],\r\n        specializations: profile.specializations || [],\r\n        experience_years: profile.experience_years || 0,\r\n        hourly_rate: profile.hourly_rate || 0,\r\n        professional_summary: profile.professional_summary || '',\r\n        service_area_radius: profile.service_area_radius || 10,\r\n        social_links: profile.social_links || {}\r\n      });\r\n\r\n      // Initialize related data from profile\r\n      if (profile.certifications) {\r\n        setCertifications(profile.certifications.map(c => ({\r\n          certification_name: c.certification_name,\r\n          issuing_organization: c.issuing_organization,\r\n          issue_date: c.issue_date || '',\r\n          expiry_date: c.expiry_date || '',\r\n          certificate_number: c.certificate_number || '',\r\n          certificate_url: c.certificate_url || ''\r\n        })));\r\n      }\r\n\r\n      if (profile.education) {\r\n        setEducation(profile.education.map(e => ({\r\n          institution_name: e.institution_name,\r\n          degree_type: e.degree_type || 'bachelor',\r\n          field_of_study: e.field_of_study || '',\r\n          start_year: e.start_year || new Date().getFullYear(),\r\n          end_year: e.end_year || new Date().getFullYear(),\r\n          is_current: e.is_current || false,\r\n          description: e.description || ''\r\n        })));\r\n      }\r\n\r\n      // Note: Portfolio data would come from a separate portfolio table\r\n      // For now, we'll initialize with empty array\r\n      setPortfolio([]);\r\n\r\n      if (profile.languages) {\r\n        setLanguages(profile.languages.map(l => ({\r\n          language_code: l,\r\n          language_name: l,\r\n          proficiency_level: 'fluent',\r\n          is_primary: false\r\n        })));\r\n      }\r\n    }\r\n  }, [profile]);\r\n\r\n  const handleSave = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      if (onSave) {\r\n        await onSave(formData);\r\n      }\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Failed to save profile:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addSpecialization = () => {\r\n    if (newSpecialization.trim() && !formData.specializations?.includes(newSpecialization.trim())) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        specializations: [...(prev.specializations || []), newSpecialization.trim()]\r\n      }));\r\n      setNewSpecialization('');\r\n    }\r\n  };\r\n\r\n  const removeSpecialization = (spec: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      specializations: prev.specializations?.filter(s => s !== spec) || []\r\n    }));\r\n  };\r\n\r\n  const addCertification = () => {\r\n    if (newCertification.certification_name && newCertification.issuing_organization) {\r\n      setCertifications(prev => [...prev, { ...newCertification }]);\r\n      setNewCertification({\r\n        certification_name: '',\r\n        issuing_organization: '',\r\n        issue_date: '',\r\n        expiry_date: '',\r\n        certificate_number: '',\r\n        certificate_url: ''\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeCertification = (index: number) => {\r\n    setCertifications(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const addEducation = () => {\r\n    if (newEducation.institution_name) {\r\n      setEducation(prev => [...prev, { ...newEducation }]);\r\n      setNewEducation({\r\n        institution_name: '',\r\n        degree_type: 'bachelor',\r\n        field_of_study: '',\r\n        start_year: new Date().getFullYear(),\r\n        end_year: new Date().getFullYear(),\r\n        is_current: false,\r\n        description: ''\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeEducation = (index: number) => {\r\n    setEducation(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const addPortfolio = () => {\r\n    if (newPortfolio.title) {\r\n      setPortfolio(prev => [...prev, { ...newPortfolio, display_order: prev.length }]);\r\n      setNewPortfolio({\r\n        title: '',\r\n        description: '',\r\n        service_type: '',\r\n        images: [],\r\n        project_date: '',\r\n        client_name: '',\r\n        project_duration: '',\r\n        technologies_used: [],\r\n        is_featured: false,\r\n        display_order: 0\r\n      });\r\n    }\r\n  };\r\n\r\n  const removePortfolio = (index: number) => {\r\n    setPortfolio(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const addTechnology = (portfolioIndex: number) => {\r\n    if (newTechnology.trim()) {\r\n      setPortfolio(prev => prev.map((p, i) => \r\n        i === portfolioIndex \r\n          ? { ...p, technologies_used: [...(p.technologies_used || []), newTechnology.trim()] }\r\n          : p\r\n      ));\r\n      setNewTechnology('');\r\n    }\r\n  };\r\n\r\n  const _removeTechnology = (portfolioIndex: number, techIndex: number) => {\r\n    setPortfolio(prev => prev.map((p, i) => \r\n      i === portfolioIndex \r\n        ? { ...p, technologies_used: (p.technologies_used || []).filter((_, ti) => ti !== techIndex) }\r\n        : p\r\n    ));\r\n  };\r\n\r\n  const addLanguage = () => {\r\n    if (newLanguage.language_name) {\r\n      setLanguages(prev => [...prev, { ...newLanguage }]);\r\n      setNewLanguage({\r\n        language_code: '',\r\n        language_name: '',\r\n        proficiency_level: 'fluent',\r\n        is_primary: false\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeLanguage = (index: number) => {\r\n    setLanguages(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const calculateProfileScore = (): number => {\r\n    let score = 0;\r\n    \r\n    // Basic info (40 points)\r\n    if (formData.bio) score += 10;\r\n    if (formData.professional_summary) score += 10;\r\n    if ((formData.experience_years || 0) > 0) score += 5;\r\n    if ((formData.hourly_rate || 0) > 0) score += 5;\r\n    if ((formData.service_area_radius || 0) > 0) score += 5;\r\n    if (profile?.avatar_url) score += 5;\r\n    \r\n    // Specializations and languages (20 points)\r\n    if (formData.specializations && formData.specializations.length > 0) score += 10;\r\n    if (languages.length > 0) score += 10;\r\n    \r\n    // Portfolio images (10 points)\r\n    if (formData.portfolio_images && formData.portfolio_images.length > 0) score += 10;\r\n    \r\n    // Certifications (10 points)\r\n    if (certifications.length > 0) score += 10;\r\n    \r\n    // Education (5 points)\r\n    if (education.length > 0) score += 5;\r\n    \r\n    // Portfolio projects (5 points)\r\n    if (portfolio.length > 0) score += 5;\r\n    \r\n    return Math.min(score, 100);\r\n  };\r\n\r\n  const profileScore = calculateProfileScore();\r\n\r\n  return (\r\n    <div className={`space-y-6 ${className}`}>\r\n      {/* Profile Completion Score */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center space-x-2\">\r\n            <CheckCircle className=\"h-5 w-5\" />\r\n            <span>Profile Completion</span>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                <div \r\n                  className=\"bg-blue-600 h-2.5 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${profileScore}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n            <span className=\"text-lg font-bold text-blue-600\">{profileScore}%</span>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 mt-2\">\r\n            Complete your profile to increase visibility and trust with potential clients\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Tabs defaultValue=\"basic\" className=\"w-full\">\r\n        <TabsList className=\"grid w-full grid-cols-5\">\r\n          <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n          <TabsTrigger value=\"certifications\">Certifications</TabsTrigger>\r\n          <TabsTrigger value=\"education\">Education</TabsTrigger>\r\n          <TabsTrigger value=\"portfolio\">Portfolio</TabsTrigger>\r\n          <TabsTrigger value=\"languages\">Languages</TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Basic Information Tab */}\r\n        <TabsContent value=\"basic\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center space-x-2\">\r\n                <User className=\"h-5 w-5\" />\r\n                <span>Basic Information</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Professional Summary</label>\r\n                <Textarea\r\n                  value={formData.professional_summary || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, professional_summary: e.target.value }))}\r\n                  placeholder=\"Tell potential clients about your expertise and what makes you unique...\"\r\n                  rows={4}\r\n                  disabled={!isEditing}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Bio</label>\r\n                <Textarea\r\n                  value={formData.bio || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, bio: e.target.value }))}\r\n                  placeholder=\"Share your story, passion, and approach to your work...\"\r\n                  rows={3}\r\n                  disabled={!isEditing}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Years of Experience</label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={formData.experience_years || ''}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, experience_years: parseInt(e.target.value) || 0 }))}\r\n                    min=\"0\"\r\n                    max=\"50\"\r\n                    disabled={!isEditing}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Hourly Rate ($)</label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={formData.hourly_rate || ''}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, hourly_rate: parseFloat(e.target.value) || 0 }))}\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    disabled={!isEditing}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Service Area Radius (km)</label>\r\n                <Input\r\n                  type=\"number\"\r\n                  value={formData.service_area_radius || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, service_area_radius: parseInt(e.target.value) || 10 }))}\r\n                  min=\"1\"\r\n                  max=\"100\"\r\n                  disabled={!isEditing}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Specializations</label>\r\n                <div className=\"flex space-x-2 mb-2\">\r\n                  <Input\r\n                    value={newSpecialization}\r\n                    onChange={(e) => setNewSpecialization(e.target.value)}\r\n                    placeholder=\"Add a specialization...\"\r\n                    disabled={!isEditing}\r\n                  />\r\n                  <Button \r\n                    onClick={addSpecialization} \r\n                    disabled={!isEditing || !newSpecialization.trim()}\r\n                    size=\"sm\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {formData.specializations?.map((spec, index) => (\r\n                    <Badge key={index} variant=\"secondary\" className=\"flex items-center space-x-1\">\r\n                      <span>{spec}</span>\r\n                      {isEditing && (\r\n                        <button\r\n                          onClick={() => removeSpecialization(spec)}\r\n                          className=\"ml-1 hover:text-red-500\"\r\n                        >\r\n                          <Trash2 className=\"h-3 w-3\" />\r\n                        </button>\r\n                      )}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Certifications Tab */}\r\n        <TabsContent value=\"certifications\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center space-x-2\">\r\n                <Award className=\"h-5 w-5\" />\r\n                <span>Certifications</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Add New Certification */}\r\n              <div className=\"border rounded-lg p-4 bg-gray-50\">\r\n                <h4 className=\"font-medium mb-3\">Add New Certification</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <Input\r\n                    placeholder=\"Certification Name\"\r\n                    value={newCertification.certification_name}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, certification_name: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Issuing Organization\"\r\n                    value={newCertification.issuing_organization}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, issuing_organization: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    type=\"date\"\r\n                    placeholder=\"Issue Date\"\r\n                    value={newCertification.issue_date}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, issue_date: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    type=\"date\"\r\n                    placeholder=\"Expiry Date\"\r\n                    value={newCertification.expiry_date}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, expiry_date: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Certificate Number\"\r\n                    value={newCertification.certificate_number}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, certificate_number: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Certificate URL\"\r\n                    value={newCertification.certificate_url}\r\n                    onChange={(e) => setNewCertification(prev => ({ ...prev, certificate_url: e.target.value }))}\r\n                  />\r\n                </div>\r\n                <Button onClick={addCertification} className=\"mt-3\" disabled={!newCertification.certification_name || !newCertification.issuing_organization}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Certification\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Existing Certifications */}\r\n              <div className=\"space-y-3\">\r\n                {certifications.map((cert, index) => (\r\n                  <div key={index} className=\"border rounded-lg p-3 flex justify-between items-start\">\r\n                    <div>\r\n                      <h5 className=\"font-medium\">{cert.certification_name}</h5>\r\n                      <p className=\"text-sm text-gray-600\">{cert.issuing_organization}</p>\r\n                      <p className=\"text-xs text-gray-500\">\r\n                        {cert.issue_date && `Issued: ${cert.issue_date}`}\r\n                        {cert.expiry_date && ` â€¢ Expires: ${cert.expiry_date}`}\r\n                      </p>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => removeCertification(index)}\r\n                      className=\"text-red-500 hover:text-red-700\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Education Tab */}\r\n        <TabsContent value=\"education\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center space-x-2\">\r\n                <GraduationCap className=\"h-5 w-5\" />\r\n                <span>Education</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Add New Education */}\r\n              <div className=\"border rounded-lg p-4 bg-gray-50\">\r\n                <h4 className=\"font-medium mb-3\">Add New Education</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <Input\r\n                    placeholder=\"Institution Name\"\r\n                    value={newEducation.institution_name}\r\n                    onChange={(e) => setNewEducation(prev => ({ ...prev, institution_name: e.target.value }))}\r\n                  // eslint-disable-next-line react/jsx-no-comment-textnodes\n                  />\r\n                  {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n                  <Select value={newEducation.degree_type} onValueChange={(value) => setNewEducation(prev => ({ ...prev, degree_type: value as any }))}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Degree Type\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {DEGREE_TYPES.map(degree => (\r\n                        <SelectItem key={degree.value} value={degree.value}>\r\n                          {degree.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <Input\r\n                    placeholder=\"Field of Study\"\r\n                    value={newEducation.field_of_study}\r\n                    onChange={(e) => setNewEducation(prev => ({ ...prev, field_of_study: e.target.value }))}\r\n                  />\r\n                  <div className=\"flex space-x-2\">\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Start Year\"\r\n                      value={newEducation.start_year || ''}\r\n                      onChange={(e) => setNewEducation(prev => ({ ...prev, start_year: parseInt(e.target.value) || new Date().getFullYear() }))}\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"End Year\"\r\n                      value={newEducation.end_year || ''}\r\n                      onChange={(e) => setNewEducation(prev => ({ ...prev, end_year: parseInt(e.target.value) || new Date().getFullYear() }))}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"isCurrent\"\r\n                      checked={newEducation.is_current}\r\n                      onChange={(e) => setNewEducation(prev => ({ ...prev, is_current: e.target.checked }))}\r\n                    />\r\n                    <label htmlFor=\"isCurrent\" className=\"text-sm\">Currently studying</label>\r\n                  </div>\r\n                </div>\r\n                <Textarea\r\n                  placeholder=\"Description (optional)\"\r\n                  value={newEducation.description || ''}\r\n                  onChange={(e) => setNewEducation(prev => ({ ...prev, description: e.target.value }))}\r\n                  className=\"mt-3\"\r\n                  rows={2}\r\n                />\r\n                <Button onClick={addEducation} className=\"mt-3\" disabled={!newEducation.institution_name}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Education\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Existing Education */}\r\n              <div className=\"space-y-3\">\r\n                {education.map((edu, index) => (\r\n                  <div key={index} className=\"border rounded-lg p-3 flex justify-between items-start\">\r\n                    <div>\r\n                      <h5 className=\"font-medium\">{edu.institution_name}</h5>\r\n                      <p className=\"text-sm text-gray-600\">\r\n                        {edu.degree_type && DEGREE_TYPES.find(d => d.value === edu.degree_type)?.label}\r\n                        {edu.field_of_study && ` in ${edu.field_of_study}`}\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-500\">\r\n                        {edu.start_year} - {edu.is_current ? 'Present' : edu.end_year}\r\n                      </p>\r\n                      {edu.description && <p className=\"text-sm mt-1\">{edu.description}</p>}\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => removeEducation(index)}\r\n                      className=\"text-red-500 hover:text-red-700\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Portfolio Tab */}\r\n        <TabsContent value=\"portfolio\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center space-x-2\">\r\n                <Briefcase className=\"h-5 w-5\" />\r\n                <span>Portfolio</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Add New Portfolio Item */}\r\n              <div className=\"border rounded-lg p-4 bg-gray-50\">\r\n                <h4 className=\"font-medium mb-3\">Add New Portfolio Item</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <Input\r\n                    placeholder=\"Project Title\"\r\n                    value={newPortfolio.title}\r\n                    onChange={(e) => setNewPortfolio(prev => ({ ...prev, title: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Service Type\"\r\n                    value={newPortfolio.service_type}\r\n                    onChange={(e) => setNewPortfolio(prev => ({ ...prev, service_type: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    type=\"date\"\r\n                    placeholder=\"Project Date\"\r\n                    value={newPortfolio.project_date}\r\n                    onChange={(e) => setNewPortfolio(prev => ({ ...prev, project_date: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Project Duration\"\r\n                    value={newPortfolio.project_duration}\r\n                    onChange={(e) => setNewPortfolio(prev => ({ ...prev, project_duration: e.target.value }))}\r\n                  />\r\n                  <Input\r\n                    placeholder=\"Client Name (optional)\"\r\n                    value={newPortfolio.client_name}\r\n                    onChange={(e) => setNewPortfolio(prev => ({ ...prev, client_name: e.target.value }))}\r\n                  />\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"isFeatured\"\r\n                      checked={newPortfolio.is_featured}\r\n                      onChange={(e) => setNewPortfolio(prev => ({ ...prev, is_featured: e.target.checked }))}\r\n                    />\r\n                    <label htmlFor=\"isFeatured\" className=\"text-sm\">Featured project</label>\r\n                  </div>\r\n                </div>\r\n                <Textarea\r\n                  placeholder=\"Project Description\"\r\n                  value={newPortfolio.description || ''}\r\n                  onChange={(e) => setNewPortfolio(prev => ({ ...prev, description: e.target.value }))}\r\n                  className=\"mt-3\"\r\n                  rows={2}\r\n                />\r\n                <div className=\"mt-3\">\r\n                  <label className=\"block text-sm font-medium mb-2\">Technologies Used</label>\r\n                  <div className=\"flex space-x-2 mb-2\">\r\n                    <Input\r\n                      value={newTechnology}\r\n                      onChange={(e) => setNewTechnology(e.target.value)}\r\n                      placeholder=\"Add technology...\"\r\n                    />\r\n                    <Button \r\n                      onClick={() => addTechnology(-1)} \r\n                      disabled={!newTechnology.trim()}\r\n                      size=\"sm\"\r\n                    >\r\n                      <Plus className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {(newPortfolio.technologies_used || []).map((tech, index) => (\r\n                      <Badge key={index} variant=\"secondary\" className=\"flex items-center space-x-1\">\r\n                        <span>{tech}</span>\r\n                        <button\r\n                          onClick={() => setNewPortfolio(prev => ({ \r\n                            ...prev, \r\n                            technologies_used: (prev.technologies_used || []).filter((_, i) => i !== index) \r\n                          }))}\r\n                          className=\"ml-1 hover:text-red-500\"\r\n                        >\r\n                          <Trash2 className=\"h-3 w-3\" />\r\n                        </button>\r\n                      </Badge>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <Button onClick={addPortfolio} className=\"mt-3\" disabled={!newPortfolio.title}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Portfolio Item\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Existing Portfolio */}\r\n              <div className=\"space-y-3\">\r\n                {portfolio.map((item, index) => (\r\n                  <div key={index} className=\"border rounded-lg p-3 flex justify-between items-start\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center space-x-2 mb-2\">\r\n                        <h5 className=\"font-medium\">{item.title}</h5>\r\n                        {item.is_featured && (\r\n                          <Badge variant=\"default\" className=\"text-xs\">Featured</Badge>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-600\">{item.description}</p>\r\n                      <p className=\"text-xs text-gray-500 mt-1\">\r\n                        {item.service_type && `${item.service_type} â€¢ `}\r\n                        {item.project_date && `${item.project_date} â€¢ `}\r\n                        {item.project_duration && `${item.project_duration}`}\r\n                      </p>\r\n                      {(item.technologies_used || []).length > 0 && (\r\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                          {(item.technologies_used || []).map((tech, techIndex) => (\r\n                            <Badge key={techIndex} variant=\"outline\" className=\"text-xs\">\r\n                              {tech}\r\n                            </Badge>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => removePortfolio(index)}\r\n                      className=\"text-red-500 hover:text-red-700 ml-3\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Languages Tab */}\r\n        <TabsContent value=\"languages\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center space-x-2\">\r\n                <Globe className=\"h-5 w-5\" />\r\n                <span>Languages</span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Add New Language */}\r\n              <div className=\"border rounded-lg p-4 bg-gray-50\">\r\n                <h4 className=\"font-medium mb-3\">Add New Language</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <Input\r\n                    placeholder=\"Language Name\"\r\n                    value={newLanguage.language_name}\r\n                    onChange={(e) => setNewLanguage(prev => ({ \r\n                      ...prev, \r\n                      language_name: e.target.value,\r\n                      language_code: e.target.value.toLowerCase().substring(0, 2)\r\n                    }))}\r\n                  // eslint-disable-next-line react/jsx-no-comment-textnodes\n                  />\r\n                  {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n                  <Select value={newLanguage.proficiency_level} onValueChange={(value) => setNewLanguage(prev => ({ ...prev, proficiency_level: value as any }))}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Proficiency Level\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {LANGUAGE_PROFICIENCY_LEVELS.map(level => (\r\n                        <SelectItem key={level.value} value={level.value}>\r\n                          {level.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"isPrimary\"\r\n                      checked={newLanguage.is_primary}\r\n                      onChange={(e) => setNewLanguage(prev => ({ ...prev, is_primary: e.target.checked }))}\r\n                    />\r\n                    <label htmlFor=\"isPrimary\" className=\"text-sm\">Primary language</label>\r\n                  </div>\r\n                </div>\r\n                <Button onClick={addLanguage} className=\"mt-3\" disabled={!newLanguage.language_name}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Language\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Existing Languages */}\r\n              <div className=\"space-y-3\">\r\n                {languages.map((lang, index) => (\r\n                  <div key={index} className=\"border rounded-lg p-3 flex justify-between items-center\">\r\n                    <div>\r\n                      <h5 className=\"font-medium\">{lang.language_name}</h5>\r\n                      <p className=\"text-sm text-gray-600\">\r\n                        {LANGUAGE_PROFICIENCY_LEVELS.find(l => l.value === lang.proficiency_level)?.label}\r\n                        {lang.is_primary && ' â€¢ Primary'}\r\n                      </p>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => removeLanguage(index)}\r\n                      className=\"text-red-500 hover:text-red-700\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex justify-end space-x-3\">\r\n        {!isEditing ? (\r\n          <Button onClick={() => setIsEditing(true)}>\r\n            <Edit className=\"h-4 w-4 mr-2\" />\r\n            Edit Profile\r\n          </Button>\r\n        ) : (\r\n          <>\r\n            <Button variant=\"outline\" onClick={() => setIsEditing(false)}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleSave} disabled={isLoading}>\r\n              {isLoading ? (\r\n                <>\r\n                  <AlertCircle className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  Save Profile\r\n                </>\r\n              )}\r\n            </Button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\config\\performance.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'import/no-anonymous-default-export').","line":196,"column":1,"severity":1,"nodeType":null,"fix":{"range":[5886,5948],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\r\n * Production Performance Guardrails Configuration\r\n * \r\n * This file contains production-ready thresholds and alert configurations\r\n * for the performance monitoring system.\r\n */\r\n\r\nimport { GuardrailConfig } from '@/lib/performance/guardrails'\r\n\r\n// Environment-specific configurations\r\nconst ENVIRONMENT_CONFIGS = {\r\n  development: {\r\n    maxResponseTime: 10000, // 10 seconds - more lenient for dev\r\n    maxMemoryUsage: 1024, // 1GB - dev environments often have more memory\r\n    maxCpuUsage: 90, // 90% - dev can run hotter\r\n    maxRequestRate: 2000, // 2000 req/min - higher for testing\r\n    maxErrorRate: 10, // 10% - more tolerant in dev\r\n    maxCostPerHour: 50, // $50/hr - dev environment\r\n    alertThreshold: 85, // Alert at 85% of limit\r\n  },\r\n  staging: {\r\n    maxResponseTime: 7000, // 7 seconds\r\n    maxMemoryUsage: 768, // 768MB\r\n    maxCpuUsage: 85, // 85%\r\n    maxRequestRate: 1500, // 1500 req/min\r\n    maxErrorRate: 7, // 7%\r\n    maxCostPerHour: 25, // $25/hr\r\n    alertThreshold: 80, // Alert at 80% of limit\r\n  },\r\n  production: {\r\n    maxResponseTime: 5000, // 5 seconds - strict for production\r\n    maxMemoryUsage: 512, // 512MB - optimize for cost\r\n    maxCpuUsage: 80, // 80% - leave headroom for spikes\r\n    maxRequestRate: 1000, // 1000 req/min - production traffic\r\n    maxErrorRate: 5, // 5% - low error tolerance\r\n    maxCostPerHour: 15, // $15/hr - cost control\r\n    alertThreshold: 75, // Alert at 75% of limit - early warning\r\n  },\r\n} as const\r\n\r\n// Alert channels configuration\r\nexport interface AlertChannelConfig {\r\n  enabled: boolean\r\n  webhook?: string\r\n  email?: string\r\n  slack?: {\r\n    webhookUrl: string\r\n    channel: string\r\n    username?: string\r\n  }\r\n  teams?: {\r\n    webhookUrl: string\r\n  }\r\n  pagerduty?: {\r\n    integrationKey: string\r\n    severity: 'critical' | 'error' | 'warning' | 'info'\r\n  }\r\n}\r\n\r\nexport const ALERT_CHANNELS: Record<string, AlertChannelConfig> = {\r\n  development: {\r\n    enabled: false, // Disable alerts in dev to avoid noise\r\n  },\r\n  staging: {\r\n    enabled: true,\r\n    slack: {\r\n      webhookUrl: process.env.SLACK_WEBHOOK_URL_STAGING || '',\r\n      channel: '#staging-alerts',\r\n      username: 'Bookiji Staging Monitor'\r\n    }\r\n  },\r\n  production: {\r\n    enabled: true,\r\n    slack: {\r\n      webhookUrl: process.env.SLACK_WEBHOOK_URL_PROD || '',\r\n      channel: '#production-alerts',\r\n      username: 'Bookiji Production Monitor'\r\n    },\r\n    email: process.env.ALERT_EMAIL || 'alerts@bookiji.com',\r\n    pagerduty: {\r\n      integrationKey: process.env.PAGERDUTY_INTEGRATION_KEY || '',\r\n      severity: 'critical'\r\n    }\r\n  }\r\n}\r\n\r\n// Critical thresholds that trigger immediate alerts\r\nexport const CRITICAL_THRESHOLDS = {\r\n  responseTime: 15000, // 15 seconds - system is essentially down\r\n  memoryUsage: 2048, // 2GB - memory leak or serious issue\r\n  cpuUsage: 95, // 95% - system overload\r\n  errorRate: 25, // 25% - major system failure\r\n  requestRate: 5000, // 5000 req/min - potential DDoS or runaway process\r\n}\r\n\r\n/**\r\n * Get performance configuration based on environment\r\n */\r\nexport function getPerformanceConfig(): GuardrailConfig {\r\n  const env = process.env.NODE_ENV || 'development'\r\n  const deployEnv = process.env.DEPLOY_ENV || env\r\n  \r\n  // Use production config for any production-like environment\r\n  const configKey = ['production', 'prod'].includes(deployEnv.toLowerCase()) ? 'production' : \r\n                   ['staging', 'stage'].includes(deployEnv.toLowerCase()) ? 'staging' : \r\n                   'development'\r\n  \r\n  return ENVIRONMENT_CONFIGS[configKey]\r\n}\r\n\r\n/**\r\n * Get alert configuration based on environment\r\n */\r\nexport function getAlertConfig(): AlertChannelConfig {\r\n  const env = process.env.NODE_ENV || 'development'\r\n  const deployEnv = process.env.DEPLOY_ENV || env\r\n  \r\n  const configKey = ['production', 'prod'].includes(deployEnv.toLowerCase()) ? 'production' : \r\n                   ['staging', 'stage'].includes(deployEnv.toLowerCase()) ? 'staging' : \r\n                   'development'\r\n  \r\n  return ALERT_CHANNELS[configKey]\r\n}\r\n\r\n/**\r\n * Alert severity levels\r\n */\r\nexport enum AlertSeverity {\r\n  INFO = 'info',\r\n  WARNING = 'warning', \r\n  ERROR = 'error',\r\n  CRITICAL = 'critical'\r\n}\r\n\r\n/**\r\n * Determine alert severity based on violation\r\n */\r\nexport function getAlertSeverity(metric: string, value: number, threshold: number): AlertSeverity {\r\n  const criticalThreshold = CRITICAL_THRESHOLDS[metric as keyof typeof CRITICAL_THRESHOLDS]\r\n  \r\n  if (criticalThreshold && value >= criticalThreshold) {\r\n    return AlertSeverity.CRITICAL\r\n  }\r\n  \r\n  const ratio = value / threshold\r\n  if (ratio >= 1.2) return AlertSeverity.CRITICAL\r\n  if (ratio >= 1.0) return AlertSeverity.ERROR\r\n  if (ratio >= 0.9) return AlertSeverity.WARNING\r\n  return AlertSeverity.INFO\r\n}\r\n\r\n/**\r\n * Format alert message for different channels\r\n */\r\nexport function formatAlertMessage(\r\n  violations: string[], \r\n  severity: AlertSeverity,\r\n  environment: string\r\n): {\r\n  title: string\r\n  message: string\r\n  color?: string\r\n  emoji?: string\r\n} {\r\n  const emoji = {\r\n    [AlertSeverity.CRITICAL]: 'ðŸš¨',\r\n    [AlertSeverity.ERROR]: 'âŒ', \r\n    [AlertSeverity.WARNING]: 'âš ï¸',\r\n    [AlertSeverity.INFO]: 'â„¹ï¸'\r\n  }[severity]\r\n\r\n  const color = {\r\n    [AlertSeverity.CRITICAL]: '#FF0000',\r\n    [AlertSeverity.ERROR]: '#FF4444',\r\n    [AlertSeverity.WARNING]: '#FFA500', \r\n    [AlertSeverity.INFO]: '#0066CC'\r\n  }[severity]\r\n\r\n  const title = `${emoji} ${severity.toUpperCase()} - Performance Alert (${environment})`\r\n  \r\n  const message = [\r\n    `Environment: ${environment}`,\r\n    `Severity: ${severity}`,\r\n    `Time: ${new Date().toISOString()}`,\r\n    '',\r\n    'Violations:',\r\n    ...violations.map(v => `â€¢ ${v}`),\r\n    '',\r\n    'Please investigate immediately if this is a production environment.'\r\n  ].join('\\n')\r\n\r\n  return { title, message, color, emoji }\r\n}\r\n\r\n// Export default configuration\r\n// eslint-disable-next-line import/no-anonymous-default-export\nconst performanceConfig = {\r\n  getPerformanceConfig,\r\n  getAlertConfig,\r\n  getAlertSeverity,\r\n  formatAlertMessage,\r\n  CRITICAL_THRESHOLDS,\r\n  AlertSeverity\r\n}\r\n\r\nexport default performanceConfig\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Projects\\bookijibck\\src\\hooks\\useNotifications.ts","messages":[{"ruleId":"prefer-const","severity":1,"message":"'_isSubscribed' is never reassigned. Use 'const' instead.","line":128,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":128,"endColumn":22,"fix":{"range":[4080,4105],"text":"const _isSubscribed = false"}}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchNotifications'. Either include it or remove the dependency array.","line":279,"column":6,"nodeType":"ArrayExpression","endLine":279,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchNotifications]","fix":{"range":[8798,8800],"text":"[fetchNotifications]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState, useEffect, useCallback } from 'react'\nimport { supabaseBrowserClient } from '@/lib/supabaseClient'\nimport { Notification } from '@/types/notification'\nimport { NotificationService } from '@/lib/services/notificationService'\n\ninterface NotificationState {\n  data: Notification[];\n  isLoading: boolean;\n  error: string | null;\n}\n\nexport function useNotifications() {\n  const [state, setState] = useState<NotificationState>({\n    data: [],\n    isLoading: false,\n    error: null\n  })\n\n  const notificationService = NotificationService.getInstance()\n\n  const fetchNotifications = useCallback(async () => {\n    const supabase = supabaseBrowserClient()\n    if (!supabase) {\n      setState(prev => ({ ...prev, isLoading: false, error: 'Supabase client not available' }))\n      return\n    }\n\n    const { data: { session } } = await supabase.auth.getSession()\n    if (!session) {\n      // Don't set error for unauthenticated users - just return empty state\n      setState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: null,\n        data: []\n      }))\n      return\n    }\n\n    setState(prev => ({ ...prev, isLoading: true, error: null }))\n\n    try {\n      const notifications = await notificationService.fetchNotifications(session.access_token)\n      setState({\n        data: notifications,\n        isLoading: false,\n        error: null\n      })\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error instanceof Error ? error.message : 'Failed to load notifications'\n      }))\n    }\n  }, [notificationService])\n\n  const markAsRead = useCallback(async (notificationId: string) => {\n    const supabase = supabaseBrowserClient()\n    if (!supabase) return\n    \n    const { data: { session } } = await supabase.auth.getSession()\n    if (!session) return\n    try {\n      await notificationService.markAsRead(notificationId, session.access_token)\n      setState(prev => ({\n        ...prev,\n        data: prev.data.map(notification =>\n          notification.id === notificationId\n\n            ? { ...notification, read: true, read_at: new Date().toISOString() }\n\n            : notification\n        )\n      }))\n    } catch (error) {\n      console.error('Failed to mark notification as read:', error)\n    }\n  }, [notificationService])\n\n  const markAllAsRead = useCallback(async () => {\n    const supabase = supabaseBrowserClient()\n    if (!supabase) return\n    \n    const { data: { session } } = await supabase.auth.getSession()\n    if (!session) return\n    try {\n      await notificationService.markAllAsRead(session.access_token)\n      const timestamp = new Date().toISOString()\n      setState(prev => ({\n        ...prev,\n\n        data: prev.data.map(notification => ({ ...notification, read: true, read_at: timestamp }))\n\n      }))\n    } catch (error) {\n      console.error('Failed to mark all notifications as read:', error)\n    }\n  }, [notificationService])\n\n  const deleteNotification = useCallback(async (notificationId: string) => {\n    const supabase = supabaseBrowserClient()\n    if (!supabase) return\n    \n    const { data: { session } } = await supabase.auth.getSession()\n    if (!session) return\n    try {\n      await notificationService.deleteNotification(notificationId, session.access_token)\n      setState(prev => ({\n        ...prev,\n        data: prev.data.filter(notification => notification.id !== notificationId)\n      }))\n    } catch (error) {\n      console.error('Failed to delete notification:', error)\n    }\n  }, [notificationService])\n\n  // Set up real-time notifications with reconnection logic\n  useEffect(() => {\n    let channel: ReturnType<NonNullable<ReturnType<typeof supabaseBrowserClient>>['channel']> | null = null\n    let reconnectTimeout: ReturnType<typeof setTimeout> | null = null\n    let currentSupabase: ReturnType<typeof supabaseBrowserClient> | null = null\n    let reconnectAttempts = 0\n    let lastErrorTime = 0\n    const MAX_RECONNECT_ATTEMPTS = 5\n    const INITIAL_RECONNECT_DELAY = 2000 // 2 seconds\n    const MAX_RECONNECT_DELAY = 30000 // 30 seconds\n    let _isSubscribed = false\n\n    const subscribe = async () => {\n      const supabase = supabaseBrowserClient()\n      if (!supabase) return\n      currentSupabase = supabase\n      \n      const { data: { session } } = await supabase.auth.getSession()\n      if (!session?.user?.id) return\n\n      // Clean up existing channel if any\n      if (channel) {\n        supabase.removeChannel(channel)\n        channel = null\n      }\n\n      try {\n        channel = supabase\n          .channel(`notifications-${session.user.id}`, {\n            config: {\n              broadcast: { self: false },\n              presence: { key: session.user.id }\n            }\n          })\n          .on(\n            'postgres_changes',\n            {\n              event: 'INSERT',\n              schema: 'public',\n              table: 'notifications',\n              filter: `user_id=eq.${session.user.id}`\n            },\n            (payload) => {\n              setState(prev => ({\n                ...prev,\n                data: [payload.new as Notification, ...prev.data]\n              }))\n            }\n          )\n          .on(\n            'postgres_changes',\n            {\n              event: 'UPDATE',\n              schema: 'public',\n              table: 'notifications',\n              filter: `user_id=eq.${session.user.id}`\n            },\n            (payload) => {\n              setState(prev => ({\n                ...prev,\n                data: prev.data.map(notification =>\n                  notification.id === (payload.new as Notification).id\n                    ? payload.new as Notification\n                    : notification\n                )\n              }))\n            }\n          )\n          .on(\n            'postgres_changes',\n            {\n              event: 'DELETE',\n              schema: 'public',\n              table: 'notifications',\n              filter: `user_id=eq.${session.user.id}`\n            },\n            (payload) => {\n              setState(prev => ({\n                ...prev,\n                data: prev.data.filter(notification => notification.id !== payload.old.id)\n              }))\n            }\n          )\n          .subscribe((status) => {\n            if (status === 'SUBSCRIBED') {\n              isSubscribed = true\n              reconnectAttempts = 0 // Reset on successful subscription\n              lastErrorTime = 0\n            } else if (status === 'CHANNEL_ERROR') {\n              isSubscribed = false\n              // Only log if it's been more than 10 seconds since last error (avoid spam)\n              const now = Date.now()\n              if (now - lastErrorTime > 10000) {\n                console.warn('Notifications real-time channel error. Will retry automatically.')\n                lastErrorTime = now\n              }\n              if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {\n                attemptReconnect()\n              } else {\n                console.warn('Max reconnection attempts reached. Real-time notifications disabled. Polling will continue.')\n              }\n            } else if (status === 'CLOSED') {\n              isSubscribed = false\n              // Only attempt reconnect if it wasn't intentionally closed\n              if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {\n                attemptReconnect()\n              }\n            } else if (status === 'TIMED_OUT') {\n              isSubscribed = false\n              if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {\n                attemptReconnect()\n              }\n            }\n          })\n      } catch (error) {\n        console.error('Failed to set up notifications channel:', error)\n        isSubscribed = false\n        if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {\n          attemptReconnect()\n        }\n      }\n    }\n\n    const attemptReconnect = () => {\n      if (reconnectTimeout) return\n      \n      reconnectAttempts++\n      // Exponential backoff: 2s, 4s, 8s, 16s, 30s (max)\n      const delay = Math.min(\n        INITIAL_RECONNECT_DELAY * Math.pow(2, reconnectAttempts - 1),\n        MAX_RECONNECT_DELAY\n      )\n      \n      reconnectTimeout = setTimeout(() => {\n        reconnectTimeout = null\n        const supabase = supabaseBrowserClient()\n        if (!supabase) return\n        \n        subscribe()\n      }, delay)\n    }\n\n    subscribe()\n\n    return () => {\n      if (channel && currentSupabase) {\n        currentSupabase.removeChannel(channel)\n        channel = null\n      }\n      if (reconnectTimeout) {\n        clearTimeout(reconnectTimeout)\n        reconnectTimeout = null\n      }\n      isSubscribed = false\n    }\n  }, [])\n\n  // Initial fetch - only run once on mount\n  useEffect(() => {\n    fetchNotifications()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []) // Intentionally empty - only fetch once on mount\n\n  return {\n    notifications: state.data,\n    unreadCount: state.data.filter(n => !n.read).length,\n    isLoading: state.isLoading,\n    error: state.error,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification,\n    refresh: fetchNotifications\n  }\n} ","usedDeprecatedRules":[]}]